name = "brightbet-worker"
main = "src/index.ts"
compatibility_date = "2024-06-01"
compatibility_flags = ["nodejs_compat"]

routes = [
  { pattern = "brightbet.tech/*", zone_name = "brightbet.tech" },
  { pattern = "www.brightbet.tech/*", zone_name = "brightbet.tech" },
]

[build]
command = "cd ../frontend && npm install && npm run build"
cwd = "."

[build.upload]
rules = [
  { type = "Text", globs = ["**/*.html"], fallthrough = true },
  { type = "Text", globs = ["**/*.css"], fallthrough = true }
]

[site]
bucket = "../frontend/dist"

[ai]
binding = "AI"

[vars]
PYTHON_API_URL = "http://localhost:8000"
APP_BASE_URL = "https://brightbet.tech"

# Stripe keys are set as encrypted secrets via:
#   wrangler secret put STRIPE_SECRET_KEY
#   wrangler secret put STRIPE_WEBHOOK_SECRET
